(()=>{"use strict";var t,i,e,s={8337:(t,i,e)=>{var s=e(2213);const n=window;class o{constructor(t,i,e,s,n){this.entities={},this.isMouseDown=!1,this.start=()=>this.application.start(),this.stop=()=>this.application.stop(),this.pondRef=t,this.element=i,this.width=e,this.height=s,this.gridSize=n,this.init()}init(){this.application&&(console.debug("Removing PIXI instance"),this.application.view.parentNode.removeChild(this.application.view),this.application.destroy(!0,{children:!0,texture:!0,baseTexture:!0}),this.application=null,this.element.children.item(0)&&this.element.removeChild(this.element.children.item(0))),console.debug("Creating PIXI instance"),this.application=new s.Mx({width:this.width*this.gridSize,height:this.height*this.gridSize}),this.application.renderer.plugins.interaction.cursorStyles.default="none",this.element.appendChild(this.application.view),this.application.stage.x=this.application.view.width/2,this.application.stage.y=this.application.view.height/2,this.application.stage.width=this.application.view.width,this.application.stage.height=this.application.view.height,this.application.ticker.add((()=>this.onTick())),this.entityHolder=new s.W2,this.application.stage.addChild(this.entityHolder),this.fps=new s.xv("FPS: ??",{fill:11206570,fontSize:8}),this.fps.x=-this.application.view.width/2,this.fps.y=-this.application.view.height/2,this.application.stage.addChild(this.fps),this.cursor=new s.TC,this.cursor.beginFill(16777215),this.cursor.drawCircle(this.gridSize/2,this.gridSize/2,this.gridSize/2),this.cursor.endFill(),this.cursor.position.x=0,this.cursor.position.y=0,this.application.stage.addChild(this.cursor),this.application.stage.interactive=!0,this.application.view.addEventListener("mousemove",(t=>this.onMouseMove(t))),this.application.view.addEventListener("mousedown",(t=>this.onMouseDown(t))),this.application.view.addEventListener("mouseup",(t=>this.onMouseUp(t)))}onMouseMove(t){const i=this.getGridPosition(t);this.cursor.position.x=i.x*this.gridSize,this.cursor.position.y=i.y*this.gridSize,this.lastGridLocation=i}onMouseDown(t){t.stopPropagation(),this.isMouseDown=!0,this.lastGridLocation=this.getGridPosition(t)}onMouseUp(t){t.stopPropagation(),this.isMouseDown=!1}onClick(t,i){this.pondRef.invokeMethodAsync("OnClick",t,i)}getGridPosition(t){const i=t.offsetX-this.application.stage.x,e=t.offsetY-this.application.stage.y;return{x:Math.round(i/this.gridSize),y:Math.round(e/this.gridSize)}}onTick(){this.fps.text=`${Math.round(s.vB.shared.FPS)} fps`,this.isMouseDown&&this.onClick(this.lastGridLocation.x,this.lastGridLocation.y)}resize(t,i,e){console.debug(`Resize: ${t}x${i} gridSize: ${e}`),this.width=t,this.height=i,this.gridSize=e,this.init()}createEntity(t,i,e,n){const o=new s.TC;o.beginFill(n),o.drawCircle(this.gridSize/2,this.gridSize/2,this.gridSize/2),o.endFill(),o.position.x=i*this.gridSize,o.position.y=e*this.gridSize,this.entities[t]=o,this.entityHolder.addChild(o)}destroyEntity(t){this.entities[t]&&(this.entities[t].destroy(),this.entities[t]=null,delete this.entities[t])}moveEntity(t,i,e){if(!this.entities[t])return;const s=this.entities[t];s.position.x=i*this.gridSize,s.position.y=e*this.gridSize}changeEntityColor(t,i){if(!this.entities[t])return;const e=this.entities[t];e.clear(),e.beginFill(i),e.drawCircle(this.gridSize/2,this.gridSize/2,this.gridSize/2),e.endFill()}processEntityChangeRequestsRaw(t){const i=n.Blazor.platform.getArrayLength(t);let e;for(e=0;e<i;e++){const{entryPtr:i,id:s,type:n}=a(t,e);if(this.entities[s])switch(n){case r.Move:const{x:t,y:n}=h(i);this.moveEntity(s,t,n);break;case r.Color:const o=l(i);this.changeEntityColor(s,o);break;case r.None:return console.debug(`Entity Changes Last Tick: ${e}`),!0;default:throw new Error("unknown type")}}return console.debug(`[FULL] Entity Changes Last Tick: ${e}`),!0}}var r;function a(t,i){const e=n.Blazor.platform.getArrayEntryPtr(t,i,16);return{entryPtr:e,id:n.Blazor.platform.readInt32Field(e,0),type:n.Blazor.platform.readInt32Field(e,4)}}function h(t){return{x:n.Blazor.platform.readInt32Field(t,8),y:n.Blazor.platform.readInt32Field(t,12)}}function l(t){return n.Blazor.platform.readInt32Field(t,8)}!function(t){t[t.None=0]="None",t[t.Move=1]="Move",t[t.Color=2]="Color"}(r||(r={}));var d=e(5407);self.MonacoEnvironment={getWorkerUrl:function(t,i){return"json"===i?"./assets/json.worker.js":"css"===i||"scss"===i||"less"===i?"./assets/css.worker.js":"html"===i||"handlebars"===i||"razor"===i?"./assets/html.worker.js":"typescript"===i||"javascript"===i?"./assets/ts.worker.js":"./assets/editor.worker.js"}};class c{constructor(t){this.elementId=t,this.editor=d.j6.create(document.getElementById(t),{value:"",language:"csharp",theme:"vs-dark",automaticLayout:!0})}setCode(t){this.editor.setValue(t)}getCode(){return this.editor.getValue()}}var p=function(t,i,e,s){return new(e||(e=Promise))((function(n,o){function r(t){try{h(s.next(t))}catch(t){o(t)}}function a(t){try{h(s.throw(t))}catch(t){o(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(r,a)}h((s=s.apply(t,i||[])).next())}))};self.ponds={},self.lastPond=0,self.createPond=function(t,i,e,s,n){return p(this,void 0,void 0,(function*(){self.lastPond++;const r=`pond_${self.lastPond}`;return self.ponds[r]=new o(t,i,e,s,n),r}))},self.createEditor=function(t,i){return p(this,void 0,void 0,(function*(){self[i]=new c(t)}))},self.getSize=()=>[self.innerWidth,self.innerHeight],self.bindWindowResize=t=>{let i;window.onresize=()=>{clearTimeout(i),i=setTimeout((()=>t.invokeMethodAsync("OnWindowResized")),1e3)}}}},n={};function o(t){var i=n[t];if(void 0!==i)return i.exports;var e=n[t]={id:t,loaded:!1,exports:{}};return s[t].call(e.exports,e,e.exports,o),e.loaded=!0,e.exports}o.m=s,t=[],o.O=(i,e,s,n)=>{if(!e){var r=1/0;for(d=0;d<t.length;d++){for(var[e,s,n]=t[d],a=!0,h=0;h<e.length;h++)(!1&n||r>=n)&&Object.keys(o.O).every((t=>o.O[t](e[h])))?e.splice(h--,1):(a=!1,n<r&&(r=n));if(a){t.splice(d--,1);var l=s();void 0!==l&&(i=l)}}return i}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[e,s,n]},o.n=t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return o.d(i,{a:i}),i},o.d=(t,i)=>{for(var e in i)o.o(i,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce(((i,e)=>(o.f[e](t,i),i)),[])),o.u=t=>t+".js",o.miniCssF=t=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),o.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),i={},e="pondsharp.client:",o.l=(t,s,n,r)=>{if(i[t])i[t].push(s);else{var a,h;if(void 0!==n)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var c=l[d];if(c.getAttribute("src")==t||c.getAttribute("data-webpack")==e+n){a=c;break}}a||(h=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",e+n),a.src=t),i[t]=[s];var p=(e,s)=>{a.onerror=a.onload=null,clearTimeout(u);var n=i[t];if(delete i[t],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((t=>t(s))),e)return e(s)},u=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),h&&document.head.appendChild(a)}},o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),o.j=179,o.p="./assets/",(()=>{var t={179:0};o.f.j=(i,e)=>{var s=o.o(t,i)?t[i]:void 0;if(0!==s)if(s)e.push(s[2]);else{var n=new Promise(((e,n)=>s=t[i]=[e,n]));e.push(s[2]=n);var r=o.p+o.u(i),a=new Error;o.l(r,(e=>{if(o.o(t,i)&&(0!==(s=t[i])&&(t[i]=void 0),s)){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;a.message="Loading chunk "+i+" failed.\n("+n+": "+r+")",a.name="ChunkLoadError",a.type=n,a.request=r,s[1](a)}}),"chunk-"+i,i)}},o.O.j=i=>0===t[i];var i=(i,e)=>{var s,n,[r,a,h]=e,l=0;if(r.some((i=>0!==t[i]))){for(s in a)o.o(a,s)&&(o.m[s]=a[s]);if(h)var d=h(o)}for(i&&i(e);l<r.length;l++)n=r[l],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(d)},e=self.webpackChunkpondsharp_client=self.webpackChunkpondsharp_client||[];e.forEach(i.bind(null,0)),e.push=i.bind(null,e.push.bind(e))})();var r=o.O(void 0,[6641,2863,1216],(()=>o(8337)));r=o.O(r)})();